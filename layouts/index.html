{{ define "main" }}

<!-- Hero -->
<section class="hero hero-bg">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <div class="container">
      <h1 class="hero-title">Your Hardware, Your Server, Your Rules</h1>
      <p class="hero-subtitle">Open-source self-hosting OS for any hardware &mdash; Raspberry Pi, x86_64, ARM64 SBCs, or any Linux machine. Docker orchestration, web dashboard, and offline-first design.</p>
      {{ partial "install-command.html" . }}
      <div class="hero-preview-link">
        <a href="{{ .Site.Params.demo_url }}" target="_blank" rel="noopener">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          Preview live dashboard
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
        </a>
      </div>
      <div class="hero-cta-secondary">
        <a href="/install/" class="btn btn-secondary">
          Raspberry Pi? Flash with Pi Imager
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Platform Support -->
<section class="section" id="platforms">
  <div class="container">
    <h2 class="section-title">Platform Support</h2>
    {{ partial "beta-warning.html" . }}
    <div class="table-wrap">
      <table class="platform-table">
        <thead>
          <tr>
            <th>Platform</th>
            <th>Method</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>x86_64 (Intel/AMD PC, server, VM)</td>
            <td>curl installer</td>
            <td><span class="badge badge-beta">Beta (untested)</span></td>
          </tr>
          <tr>
            <td>Raspberry Pi 5 / 4</td>
            <td>Flash image (Pi Imager)</td>
            <td><span class="badge badge-beta">Beta (untested)</span></td>
          </tr>
          <tr>
            <td>Raspberry Pi 5 / 4</td>
            <td>curl installer</td>
            <td><span class="badge badge-beta">Beta (untested)</span></td>
          </tr>
          <tr>
            <td>ARM64 SBC (Banana Pi, Pine64, etc.)</td>
            <td>Flash image</td>
            <td><span class="badge badge-experimental">Experimental (untested)</span></td>
          </tr>
          <tr>
            <td>Any Linux (Ubuntu 22.04+, Debian 12+, RHEL 9+)</td>
            <td>curl installer</td>
            <td><span class="badge badge-beta">Beta (untested)</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="platform-note">CubeOS uses Docker Swarm under the hood &mdash; if it runs Docker, it can run CubeOS.</p>
    <p class="platform-footnote">All releases are pre-production and have not been formally tested. See our <a href="https://github.com/cubeos-app/releases/releases" target="_blank" rel="noopener">release notes</a> for known issues.</p>
  </div>
</section>

<!-- Downloads -->
<section class="section section-alt" id="downloads">
  <div class="container">
    <h2 class="section-title">Download Raspberry Pi Image</h2>
    <p class="section-subtitle">Flash with Raspberry Pi Imager or <code>dd</code>. For x86/ARM64 Linux, use the curl installer above.</p>
    <div class="download-grid" id="download-cards">
      <div class="download-card download-card-primary">
        <div class="download-card-header">
          <h3>Full</h3>
          <span class="badge badge-beta" id="dl-version">loading...</span>
        </div>
        <p class="download-card-desc">All services included — App Store, VPN, file manager, AI tools. Recommended for most users.</p>
        <div class="download-card-meta">
          <span class="download-meta-item">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="2"/><path d="M16 2v20M8 2v20M2 12h20M2 7h20M2 17h20"/></svg>
            ARM64 (Pi 4/5)
          </span>
          <span class="download-meta-item" id="dl-full-size">~2.3 GB</span>
        </div>
        <a href="#" id="dl-full-btn" class="btn btn-primary download-btn" download>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download Full Image
        </a>
        <div class="download-card-footer">
          <a href="#" id="dl-full-checksum" class="download-checksum-link">SHA256 checksum</a>
        </div>
      </div>
      <div class="download-card">
        <div class="download-card-header">
          <h3>Lite</h3>
          <span class="badge badge-beta" id="dl-version-lite">loading...</span>
        </div>
        <p class="download-card-desc">Core platform only — dashboard, Docker orchestration, networking. Smaller image, fewer pre-installed services.</p>
        <div class="download-card-meta">
          <span class="download-meta-item">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="2"/><path d="M16 2v20M8 2v20M2 12h20M2 7h20M2 17h20"/></svg>
            ARM64 (Pi 4/5)
          </span>
          <span class="download-meta-item" id="dl-lite-size">~1.8 GB</span>
        </div>
        <a href="#" id="dl-lite-btn" class="btn btn-secondary download-btn" download>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download Lite Image
        </a>
        <div class="download-card-footer">
          <a href="#" id="dl-lite-checksum" class="download-checksum-link">SHA256 checksum</a>
        </div>
      </div>
    </div>
    <p class="download-release-note" id="dl-date"></p>
    <p class="download-release-note"><a href="https://github.com/cubeos-app/cubeos/releases" target="_blank" rel="noopener">View all releases on GitHub</a></p>
  </div>
</section>
<script>
(function() {
  fetch('/latest-release.json')
    .then(function(r) { return r.json(); })
    .then(function(d) {
      var v = 'v' + d.version;
      document.getElementById('dl-version').textContent = v;
      document.getElementById('dl-version-lite').textContent = v;
      document.getElementById('dl-full-btn').href = d.full_url;
      document.getElementById('dl-lite-btn').href = d.lite_url;
      document.getElementById('dl-full-checksum').href = d.full_url + '.sha256';
      document.getElementById('dl-lite-checksum').href = d.lite_url + '.sha256';
      if (d.released_at) {
        var date = new Date(d.released_at);
        document.getElementById('dl-date').textContent = 'Released ' + date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
      }
    })
    .catch(function() {
      document.getElementById('dl-version').textContent = 'unavailable';
      document.getElementById('dl-version-lite').textContent = 'unavailable';
    });
})();
</script>

<!-- Features -->
<section class="section" id="features">
  <div class="container">
    <h2 class="section-title">Built for Self-Hosting</h2>
    <div class="feature-grid">
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="2" width="8" height="8" rx="1"/>
            <rect x="14" y="2" width="8" height="8" rx="1"/>
            <rect x="2" y="14" width="8" height="8" rx="1"/>
            <rect x="14" y="14" width="8" height="8" rx="1"/>
            <path d="M10 6h4M6 10v4M18 10v4M10 18h4"/>
          </svg>
        </div>
        <h3>Docker Swarm Built-in</h3>
        <p>Self-healing container orchestration. Services restart automatically, rolling updates with zero downtime.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <line x1="1" y1="1" x2="23" y2="23"/>
            <path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"/>
            <path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"/>
            <path d="M10.71 5.05A16 16 0 0 1 22.56 9"/>
            <path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"/>
            <path d="M8.53 16.11a6 6 0 0 1 6.95 0"/>
            <line x1="12" y1="20" x2="12.01" y2="20"/>
          </svg>
        </div>
        <h3>Offline-First</h3>
        <p>Works without internet &mdash; perfect for air-gapped deployments, field use, home labs, and anywhere reliable connectivity isn't guaranteed.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="3" width="20" height="14" rx="2"/>
            <line x1="8" y1="21" x2="16" y2="21"/>
            <line x1="12" y1="17" x2="12" y2="21"/>
            <path d="M6 8h.01M9 8h.01"/>
            <line x1="6" y1="11" x2="18" y2="11"/>
          </svg>
        </div>
        <h3>Web Dashboard</h3>
        <p>Manage everything from your browser. Monitor containers, configure networking, install apps with a click.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="7" height="7" rx="1"/>
            <rect x="14" y="3" width="7" height="7" rx="1"/>
            <rect x="3" y="14" width="7" height="7" rx="1"/>
            <rect x="14" y="14" width="7" height="7" rx="1"/>
          </svg>
        </div>
        <h3>App Store</h3>
        <p>One-click install for self-hosted apps. Nextcloud, Gitea, Home Assistant, and more from the built-in catalog.</p>
      </div>
    </div>
  </div>
</section>

<!-- Quick Start -->
<section class="section section-alt" id="quickstart">
  <div class="container">
    <h2 class="section-title">Get Started in Minutes</h2>
    <div class="steps">
      <div class="step">
        <div class="step-number">1</div>
        <div class="step-content">
          <h3>Install CubeOS</h3>
          <p>Flash an image with Raspberry Pi Imager, or run the curl installer on any Linux machine.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-content">
          <h3>Open the dashboard</h3>
          <p>After a Pi flash, open <code>http://cubeos.cube</code>. After a curl install, open <code>http://&lt;your-ip&gt;:6011</code>.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <div class="step-content">
          <h3>Complete the setup wizard</h3>
          <p>Set an admin password, timezone, and network preferences. Takes less than a minute.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">4</div>
        <div class="step-content">
          <h3>Install your first app</h3>
          <p>Browse the App Store, pick an app, and deploy it with one click. That's it.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Demo CTA -->
<section class="section section-cta">
  <div class="container" style="text-align: center;">
    <h2 class="section-title">Try Before You Install</h2>
    <p class="section-subtitle">Explore the CubeOS dashboard in your browser. No Pi required.</p>
    <a href="{{ .Site.Params.demo_url }}" target="_blank" rel="noopener" class="btn btn-primary">
      Launch Demo
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
    </a>
  </div>
</section>

{{ end }}
